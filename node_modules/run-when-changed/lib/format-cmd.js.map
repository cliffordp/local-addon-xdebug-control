{"version":3,"sources":["../format-cmd.js"],"names":[],"mappings":";;;;;kBAGwB,S;;AAHxB;;AACA;;;;;;AAEe,SAAS,SAAT,CAAmB,GAAnB,EAAwB,YAAxB,EAAsC;AACnD,MAAM,WAAW,aAAa,OAAb,CAAqB,QAAQ,GAAR,KAAgB,GAArC,EAA0C,EAA1C,CAAjB;AACA,MAAM,UAAU,mBAAQ,QAAR,CAAhB;AACA,MAAM,cAAc,mBAAQ,YAAR,CAApB;AACA,MAAM,WAAW,oBAAS,QAAT,CAAjB;AACA,MAAM,SAAS;AACb,oBADa;AAEb,sBAFa;AAGb,sBAHa;AAIb,OAAG,QAJU;AAKb,oBAAgB,WALH;AAMb,qBAAiB;AANJ,GAAf;;;;;AAYA,SAAO,qBACJ,IADI,CACC,cADD,EACiB,WADjB,EAEJ,IAFI,CAEC;AAAA,WAAW,OAAO,kBAAP,IAA6B,mBAAQ,OAAR,CAAxC;AAAA,GAFD,EAGJ,IAHI,CAGC,YAAM;AACV,QAAM,OAAO,OAAO,IAAP,CAAY,MAAZ,EAAoB,IAApB,CAAyB,GAAzB,CAAb;AACA,QAAI,UAAU,IAAI,OAAJ,CAAY,IAAI,MAAJ,QAAgB,IAAhB,QAAyB,GAAzB,CAAZ,EAA2C,UAAC,KAAD,EAAQ,GAAR;AAAA,aAAgB,OAAO,GAAP,CAAhB;AAAA,KAA3C,CAAd;AACA,WAAO,OAAP;AACD,GAPI,CAAP;AAQD","file":"format-cmd.js","sourcesContent":["import { dirname, basename } from 'path';\nimport find from 'fs-find-root';\n\nexport default function formatCmd(cmd, fullFilepath) {\n  const filepath = fullFilepath.replace(process.cwd() + '/', '');\n  const filedir = dirname(filepath);\n  const fullFiledir = dirname(fullFilepath);\n  const filename = basename(filepath);\n  const values = {\n    filedir,\n    filename,\n    filepath,\n    s: filepath,\n    'full-filedir': fullFiledir,\n    'full-filepath': fullFilepath,\n  };\n\n  // chances are we don't always have to look up package.json folder, but\n  // performance hit of this is probably so insignificant, it's not worth\n  // the time to optimize this... PRs welcome of course :)\n  return find\n    .file('package.json', fullFiledir)\n    .then(rootDir => values['package-json-dir'] = dirname(rootDir))\n    .then(() => {\n      const keys = Object.keys(values).join('|');\n      let results = cmd.replace(new RegExp(`%(${keys})`, 'g'), (match, key) => values[key]);\n      return results;\n    });\n}\n"]}